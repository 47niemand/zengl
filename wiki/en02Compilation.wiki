= Compilation =

== Supported versions of compilers ==

ZenGL can be compiled by following two main Pascal compilers - [http://freepascal.org FreePascal] and [http://www.embarcadero.com/products/delphi Delphi].

=== FreePascal ===

For now only these branches of FreePascal are supported: 2.4.x and 2.2.x. But, it's strongly recommended to use version 2.4.2. If you need branch 2.2.x for some reason, then update FreePascal to version 2.2.4, please.

=== Delphi ===

Correct compilation of ZenGL, examples and additional modules are always checking with Delphi 7, Delphi 2009 and Delphi 2010. But you can use any other version of Delphi which higher then 7. If you have any problem with that then write me.

== Compilation of ZenGL in different OS's ==

=== GNU/Linux ===

For compilation under GNU/Linux there are Makefile and project file for Lazarus. Makefile is in directory *src* with source code of ZenGL. Project file for Lazarus can be found in directory *src/Lazarus*. Using Makefile you can also crosscompile for Windows(commands *make win32* and *make win64*).

Additional for compilation in some distributives(like Debian or Ubuntu) you will need following dev-packages:
  * libgl1-mesa-dev
  * libglu1-mesa-dev

=== Windows ===

There are two ways to compile ZenGL under Windows - using Delphi and Lazarus. Project files for these IDE's are in directories *Delphi* and *Lazarus* inside directory of source code - *src*. If you use Lazarus then you need to open this project file - *ZenGL-win.lpi*.

=== MacOS X ===

As for GNU/Linux under MacOS X there is also Makefile. But for compilation under MacOS X must be used command *make macos* instead of *make*. After that will be compiled universal dylib for architectures x86 and PowerPC.

== Static compilation of application with ZenGL ==

When static compilation is used you must set paths to the source code of ZenGL, extra units and some object files which located inside directory *lib*. Delphi needed only this path:
{{{
lib/zlib/delphi
}}}

For FreePascal and Lazarus compilation is little bit harder - paths must be set using target architecture and OS. For Lazarus it looks like this(($TargetCPU) and ($TargetOS) are standard macroses):
{{{
lib/jpeg/($TargetCPU)-($TargetOS)
lib/ogg/($TargetCPU)-($TargetOS)
lib/zlib/($TargetCPU)-($TargetOS)
}}}

For Windows also must be set following path:
{{{
lib/msvcrt/($TargetCPU)
}}}

Also there is a path to Chipmunk object files, if you use static compilation for it:
{{{
lib/chipmunk/($TargetCPU)-($TargetOS)
}}}

== Build configuration of ZenGL ==

There are two files for configuration - *zgl_config.cfg* Ð¸ *zgl_fpc.cfg*. Second file intended for FreePascal and no need to change it. All "options" can be turned on/off by commenting/uncommenting of defines.
First lines of zgl_config.cfg contains sections for different OS's, but only following of them can be changed:
  * *USE_LIBJPEG*(only for Windows) - whether to use the original libjpeg instead of the standard method of loading the jpeg
  * *USE_OPENAL*(only for Windows) - whether to use the OpenAL instead of the DirectSound

Next group of defines are providing ability to disable some functionality:
  * *USE_JOYSTICK* - handling joystick input
  * *USE_TEXTURE_ATLAS* - texture atlases
  * *USE_SENGINE* - procedural sprite engine
  * *USE_PARTICLES* - particles subsytem
  * *USE_SOUND* - sound subsystem
